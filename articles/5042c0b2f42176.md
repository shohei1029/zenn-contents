---
title: "Azure Machine Learning Inference HTTP Serverã‚’ä½¿ã£ã¦æ¨è«–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹"
emoji: "ğŸŒŸ"
type: "tech"
topics:
  - "azure"
  - "machinelearning"
  - "datascience"
  - "mlops"
  - "azureml"
published: true
published_at: "2022-12-13 17:52"
publication_name: "microsoft"
---

# ã¯ã˜ã‚ã«
Azure Machine Learning inference HTTP server (æ¨è«–HTTPã‚µãƒ¼ãƒãƒ¼)ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ä¸Šã§æ¨è«– (ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°)ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œãƒ»ãƒ‡ãƒãƒƒã‚°ã‚’ç°¡å˜ã«è¡Œãˆã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã®ãƒ‡ãƒãƒƒã‚°ã‚ˆã‚Šé¥ã‹ã«ç°¡å˜ã«è¡Œãˆã‚‹ã‚‚ã®ã®ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«æ¯”ã¹ã¦ã‚ã¾ã‚ŠçŸ¥ã‚‰ã‚Œã¦ã„ãªã„ãŸã‚ã¾ã¨ã‚ã¾ã—ãŸã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã«ãƒ€ãƒŸãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã®å®Ÿè¡Œä¾‹ã—ã‹ãªã‹ã£ãŸãŸã‚ (2022/12/13ç¾åœ¨)ã€ãƒ€ãƒŸãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¾‹ã¨å…±ã«ã€å®Ÿéš›ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ¢ãƒ‡ãƒ«/ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ç’°å¢ƒã‚’æ‰±ã£ãŸä¾‹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼š[Azure Machine Learning æ¨è«– HTTP ã‚µãƒ¼ãƒãƒ¼ - Azure Machine Learning | Microsoft Learn](https://learn.microsoft.com/azure/machine-learning/how-to-inference-server-http)

[2023/03/30è¿½è¨˜]
æœ¬è¨˜äº‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ¢ãƒ‡ãƒ«/ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ç’°å¢ƒã‚’ä½¿ç”¨ã—ãŸä¾‹ã¨åŒç­‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è£½å“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå´ã«è¨˜è¼‰ã„ãŸã—ã¾ã—ãŸã€‚ã‚ˆã‚Šæœ€æ–°ã‹ã¤åŒ…æ‹¬çš„ãªå†…å®¹ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§é ‚ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

## Azure Machine Learning inference HTTP server (æ¨è«–HTTPã‚µãƒ¼ãƒãƒ¼) ã¨ã¯
Azure Machine Learning inference HTTP server (æ¨è«–HTTPã‚µãƒ¼ãƒãƒ¼)ã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’HTTPã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦å…¬é–‹ã—ã€Flaskã‚µãƒ¼ãƒã®ã‚³ãƒ¼ãƒ‰ã¨ä¾å­˜é–¢ä¿‚ã‚’å˜ä¸€ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãƒ©ãƒƒãƒ—ã—ãŸPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚Azure Machine Learning ã§ãƒ¢ãƒ‡ãƒ«ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ [æ¨è«–ç”¨ã®äº‹å‰æ§‹ç¯‰æ¸ˆã¿ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸](https://learn.microsoft.com/azure/machine-learning/concept-prebuilt-docker-images-inference) ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å˜ä½“ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ãªé–‹ç™ºç’°å¢ƒã§ç°¡å˜ã«å…¥åŠ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(`score.py`)ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å•é¡ŒãŒã‚ã‚‹å ´åˆã€ã‚µãƒ¼ãƒãƒ¼ã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã®ã§ã€ãƒ‡ãƒãƒƒã‚°ã«æ´»ç”¨ã§ãã¾ã™ã€‚

## ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ‡ãƒãƒƒã‚°

ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å‰ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã‚„è¨­å®šã®ã‚¨ãƒ©ãƒ¼ã‚’æ—©æœŸã«ç™ºè¦‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ã«ã¯ã€ã•ã¾ã–ã¾ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚

- Azure Machine Learning inference HTTP server (æ¨è«–HTTPã‚µãƒ¼ãƒãƒ¼)
- [ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ](https://learn.microsoft.com/azure/machine-learning/how-to-debug-managed-online-endpoints-visual-studio-code)

æœ¬è¨˜äº‹ã¯ã€Azure Machine Learning inference HTTP serverã‚’å¯¾è±¡ã«ã—ã¦ã„ã¾ã™ã€‚

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã«æ¯”è¼ƒè¡¨ãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

| ã‚·ãƒŠãƒªã‚ª                                                                | Inference HTTP Server | ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ |
| ----------------------------------------------------------------------- | --------------------- | -------------- |
| Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å†æ§‹ç¯‰ãªã—ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã® Python ç’°å¢ƒã‚’æ›´æ–°       | Yes                   | No             |
| ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ›´æ–°                                                   | Yes                   | Yes            |
| ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨­å®šï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã€ç’°å¢ƒã€ã‚³ãƒ¼ãƒ‰ã€ãƒ¢ãƒ‡ãƒ«ï¼‰ã®æ›´æ–° | No                    | Yes            |
| VSCode ã§ã®ãƒ‡ãƒãƒƒã‚°é€£æº                                            | Yes                   | Yes            |


æ¨è«– HTTP ã‚µãƒ¼ãƒã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ ã‚³ãƒ³ãƒ†ãƒŠã®è¨­å®šã«å½±éŸ¿ã•ã‚Œã‚‹ã“ã¨ãªãã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ãƒãƒƒã‚°ã«é›†ä¸­ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

# å‰ææ¡ä»¶
- AzureML ã®ä½¿ç”¨çµŒé¨“
- Python >=3.7
- Anaconda ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿

# ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ¨è«–ã‚µãƒ¼ãƒã§ã®ãƒ‡ãƒãƒƒã‚°
## ãƒ€ãƒŸãƒ¼ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚µãƒ¼ãƒãƒ¼ã®æŒ™å‹•ã‚’ç†è§£ã™ã‚‹
([ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å†…å®¹](https://learn.microsoft.com/azure/machine-learning/how-to-inference-server-http#use-the-server)ãƒ™ãƒ¼ã‚¹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã™)

1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ ¼ç´ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

    ```bash
    mkdir server_quickstart
    cd server_quickstart
    ```

1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç«¶åˆã‚’é¿ã‘ã‚‹ãŸã‚ã€ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

    ```bash
    virtualenv myenv
    source myenv/bin/activate
    ```

1. [pypi](https://pypi.org/project/azureml-inference-server-http/)ã‹ã‚‰ `azureml-inference-server-http`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

    ```bash
    python -m pip install azureml-inference-server-http
    ```

1. ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(`score.py`)ã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€åŸºæœ¬çš„ãªã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã„ã¤ã¯ã©ã‚“ãªå…¥åŠ›ãŒã‚ã£ã¦ã‚‚ `{"message":"Hello, World!"}`ã¨è¿”ã—ã¾ã™ã€‚

    ```bash
	echo '
	import time

	def init():
	    time.sleep(1)

	def run(input_data):
	    return {"message":"Hello, World!"}
	' > score.py
    ```

1. æ¨è«–ã‚µãƒ¼ãƒãƒ¼ (`azmlinfsrv`) ã‚’èµ·å‹•ã—ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ `score.py` ã‚’è¨­å®šã—ã¾ã™ã€‚

    ```bash
    azmlinfsrv --entry_script score.py
    ```

1. `curl` ã‚’ä½¿ã£ã¦ã‚µãƒ¼ãƒãƒ¼ã«ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Šã¾ã™ã€‚

    ```bash
    curl -p 127.0.0.1:5001/score
    ```

    ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã“ã®ã‚ˆã†ãªå¿œç­”ãŒã‚ã‚Šã¾ã™ã€‚

    ```bash
    {"message": "Hello, World!ï½
    ```

ã“ã®ã‚ˆã†ã«ã€æ¨è«–ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ä¸Šã§score.pyã®å‹•ä½œç¢ºèªã‚’ç°¡å˜ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

## ã‚µãƒ³ãƒ—ãƒ«ãƒ¢ãƒ‡ãƒ«/ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ç’°å¢ƒã‚’ä½¿ç”¨ã—ãŸä¾‹

ã“ã“ã§ã¯ã€ã‚µãƒ³ãƒ—ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚ã‚‹ [ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«](https://github.com/Azure/azureml-examples/tree/main/cli/endpoints/online/model-1) (ãƒ¢ãƒ‡ãƒ«/ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ç’°å¢ƒ) ã‚’ä½¿ã£ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§æ¨è«–ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€[æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹](https://learn.microsoft.com/ja-jp/azure/machine-learning/how-to-deploy-online-endpoints?tabs=azure-cli)ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

1. ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ã€‚

    ```bash
    git clone --depth 1 https://github.com/Azure/azureml-examples
    cd azureml-examples/cli/endpoints/online/model-1/
    ```

1. condaã§ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆã—ã¾ã™ã€‚
	ä»Šå›ã€`azureml-inference-server-http`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä¸‹è¨˜`conda.yml`å†…ã®`azureml-defaults`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€è‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚

    ```bash
    # Create the environment from the YAML file
    conda env create --name model-env -f ./environment/conda.yml
    # Activate the new environment
    conda activate model-env
    ```

1. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å†…å®¹ã¯ä¸‹è¨˜ã«ãªã£ã¦ã„ã¾ã™ã€‚
	ãƒ•ã‚¡ã‚¤ãƒ«ï¼š[azureml-examples/score.py at main Â· Azure/azureml-examples](https://github.com/Azure/azureml-examples/blob/main/cli/endpoints/online/model-1/onlinescoring/score.py)

	```Python
	import os
	import logging
	import json
	import numpy
	import joblib


	def init():
	    """
	    This function is called when the container is initialized/started, typically after create/update of the deployment.
	    You can write the logic here to perform init operations like caching the model in memory
	    """
	    global model
	    # AZUREML_MODEL_DIR is an environment variable created during deployment.
	    # It is the path to the model folder (./azureml-models/$MODEL_NAME/$VERSION)
	    # Please provide your model's folder name if there is one
	    model_path = os.path.join(
		os.getenv("AZUREML_MODEL_DIR"), "model/sklearn_regression_model.pkl"
	    )
	    # deserialize the model file back into a sklearn model
	    model = joblib.load(model_path)
	    logging.info("Init complete")


	def run(raw_data):
	    """
	    This function is called for every invocation of the endpoint to perform the actual scoring/prediction.
	    In the example we extract the data from the json input and call the scikit-learn model's predict()
	    method and return the result back
	    """
	    logging.info("model 1: request received")
	    data = json.loads(raw_data)["data"]
	    data = numpy.array(data)
	    result = model.predict(data)
	    logging.info("Request processed")
	    return result.tolist()
    ```

1. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦æ¨è«–ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ã€‚
   æŒ‡å®šã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(`model_dir`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼)ã¯ `AZUREML_MODEL_DIR` å¤‰æ•°ã¨ã—ã¦å®šç¾©ã•ã‚Œã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­ã§å–å¾—ã•ã‚Œã¾ã™ã€‚
   ä»Šå›ã®å ´åˆã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã®ãƒ‘ã‚¹æŒ‡å®šéƒ¨åˆ†ã§ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ `model/sklearn_regression_model.pkl` ã¨ã®å½¢ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å¼•æ•°ã§ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (`./`) ã‚’æŒ‡å®šã—ã¾ã™ã€‚

    ```bash
    azmlinfsrv --entry_script ./onlinescoring/score.py --model_dir ./
    ```

    ã‚µãƒ¼ãƒãŒèµ·å‹•ã—ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‘¼ã³å‡ºã—ã«æˆåŠŸã—ãŸå ´åˆã€ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚‚ã—å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã‚Œã°ãƒ­ã‚°ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
    
    ![](https://storage.googleapis.com/zenn-user-upload/73ebb7f93f6e-20221213.png)

1. ã‚µãƒ³ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆ
    åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€åŒã˜ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
    curl` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã‚µãƒ¼ãƒã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®çµæœã‚’å—ã‘å–ã‚Šã¾ã™ã€‚

    ```bash
    curl --request POST "127.0.0.1:5001/score" --header 'Content-Type: application/json' --data @sample-request.json
    ```

    ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å•é¡ŒãŒãªã‘ã‚Œã°ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°çµæœãŒè¿”ã•ã‚Œã¾ã™ã€‚ã‚‚ã—ä½•ã‹å•é¡ŒãŒã‚ã‚Œã°ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã—ã¦å†åº¦ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã€æ›´æ–°å¾Œã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
    ![](https://storage.googleapis.com/zenn-user-upload/f83d0817a76c-20221213.png)
    
    ã‚µãƒ¼ãƒãƒ¼å´ã®å®Ÿè¡Œãƒ­ã‚°ã«ã‚‚æ¨è«–ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸã“ã¨ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
    ![](https://storage.googleapis.com/zenn-user-upload/97fa4a2d597e-20221213.png)
    
    ãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ "Init complete"ã€"model 1: request received"ã€"Request processed"ã¯ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆå´ã§è¡¨ç¤ºã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚ã“ã®ã‚ˆã†ã«ã€ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆå´ã§printç­‰ã‚’ä½¿ã£ãŸãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã„ãŸã„éš›ã«ã€ç°¡å˜ã«æ¨è«–ã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§å®Ÿè¡Œçµæœã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
    
# å‚è€ƒ
- [æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ - Azure Machine Learning | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/machine-learning/how-to-deploy-online-endpoints)
- [Azure Machine Learning æ¨è«– HTTP ã‚µãƒ¼ãƒãƒ¼ - Azure Machine Learning | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/machine-learning/how-to-inference-server-http)
- [VS Code ã‚’ä½¿ç”¨ã—ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ (ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼) - Azure Machine Learning | Microsoft Learn](https://learn.microsoft.com/ja-jp/azure/machine-learning/how-to-debug-managed-online-endpoints-visual-studio-code)